<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/302292 (zh-CN); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="403"/>

<div>
<span><div><span style="font-size: 32px;"><b><span style="font-family: 楷体;"><span style="color: rgb(255, 70, 53);">web 环境搭建----前端自动化构建工具(gulp)</span>:</span></b></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">1----先下载安装node.js</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">2----然后在node.js命令行安装:npm install gulp -g (全局下载安装gulp插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">3----然后进入到项目文件夹(命令cd 文件夹名),在项目文件夹中安装依赖文件:npm install gulp --save-dev (根据依赖文件下载gulp插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">4----在项目文件夹目录下初始化:npm init (初始化文件) {初始化文件后项目中会出现packgae.json文件,文件中有项目名称,版本,描述依赖关系文件等}</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">5----项目中新建js文件:gulpfile.js(自己写文件名只能是gulpfile.js)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">6----在项目文件夹目录中下载相关插件:</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">命令行:</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> npm install gulp-connect --save-dev-    (下载服务器插件列表)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> npm install gulp-uglify --save-dev-    (下载压缩js插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> npm install gulp-minify-css --save-dev-    (下载压缩css插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> npm install gulp-imagemin --save-dev-    (下载压缩图片插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> npm install gulp-minify-html --save-dev-    (下载压缩html插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> npm install gulp-less --save-dev-    (下载压缩less插件)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">7----在gulpfile.js文件中写入js代码:</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">文件内容:</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var gulp=require(&quot;gulp&quot;)                 //根插件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var connect=require(&quot;gulp-connect&quot;)      //服务器插件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var uglify=require(&quot;gulp-uglify&quot;)        //压缩js文件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var minifycss=require(&quot;gulp-minify-css&quot;) //压缩css文件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var minimg=require(&quot;gulp-imagemin&quot;)      //压缩图片文件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var minhtml=require(&quot;gulp-minify-html&quot;)  //压缩html文件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">var less=require(&quot;gulp-less&quot;)            //压缩less文件</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//创建任务</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">/*1、创建任务   task</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> * 2、找到目标文件   src</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> * 3、在pipe中执行对文件操作的方法</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> * 4、操作完成之后把操作完成之后的文件放在哪里</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"> */</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;copy-html&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    return gulp.src(&quot;src/*.html&quot;)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(minhtml())</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(gulp.dest(&quot;dits&quot;))</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(connect.reload())//服务器热替换</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//参数一是名称,参数2是回调函数,pipe是管道,获取到html放到测试,环境文件夹中.pipe()管道可以加很多个</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;copy-css&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    return gulp.src(&quot;src/css/*.css&quot;)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(minifycss())</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(gulp.dest(&quot;dits/css&quot;))</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//编译less</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;less&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    return gulp.src(&quot;src/css/*.less&quot;)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(less())</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(minifycss())</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(gulp.dest(&quot;dits/css&quot;))</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;copy-js&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    return gulp.src(&quot;src/js/*.js&quot;)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(uglify())</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(gulp.dest(&quot;dits/js&quot;))</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;copy-img&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    return gulp.src(&quot;src/img/*.{jpg,png}&quot;)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(minimg({                 //可以传参(参数是对象),对于优化的品质控制</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">                optimizationLevel:7    // 优化品质(默认为3  1~7)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            }))</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">            .pipe(gulp.dest(&quot;dits/img&quot;))</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//server</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;server&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    connect.server({</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">        root:&quot;dits&quot;,             //(根目录服务器范围设定)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">        port:8888,               //(端口号设置)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">        livereload:true          //(热替换,不用刷新就可以实时刷新修改的内容)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    })</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//监听</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//watch是监听任务名称,(ctrl + c 是终止监听任务)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;watch&quot;,function(){</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp.watch(&quot;src/*.html&quot;,[&quot;copy-html&quot;])</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp.watch(&quot;src/css/*.css&quot;,[&quot;copy-css&quot;])</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp.watch(&quot;src/js/*.js&quot;,[&quot;copy-js&quot;])</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp.watch(&quot;src/img/*.jpg&quot;,[&quot;copy-img&quot;])</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp.watch(&quot;src/css/*.less&quot;,[&quot;less&quot;])</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">})</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">//多任务同时执行:</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp.task(&quot;default&quot;,[&quot;server&quot;,&quot;watch&quot;])  //(同时执行数组中的任务,命令行直接执行gulp就可以了)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">8----测试环境搭建:执行以上动作后再命令中输入:  gulp</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">或者依次输入:</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp copy-html ( 即glup 任务名称 )</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp copy-css</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp copy-js</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp copy-img</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp less</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp server</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">    gulp watch</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">9----浏览器中输入地址查看:http://localhost:8888      </span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">                 //(8888为端口号)</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">10.压缩的时候首先打开服务器，然后下载npm install gulp-connect --save-dev</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">gulp install gulp-minify-html --save-dev</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;">11.调用方法 gulp copy-html</span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><span style="font-size: 21px;"><span style="font-family: 楷体;"><br/></span></span></div><div><br/></div></span>
</div></body></html> 